<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="None">
        
        
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>Documentation for the ML4DQM/DC notebooks</title>
        <link href="css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="js/jquery-1.10.2.min.js" defer></script>
        <script src="js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body class="homepage">

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href=".">Documentation for the ML4DQM/DC notebooks</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="active">
                                <a href=".">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">src <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="src/HistStruct/">HistStruct</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">classifiers</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="src/classifiers/AutoEncoder/">AutoEncoder</a>
</li>
            
<li >
    <a href="src/classifiers/HistogramClassifier/">HistogramClassifier</a>
</li>
            
<li >
    <a href="src/classifiers/MaxPullClassifier/">MaxPullClassifier</a>
</li>
            
<li >
    <a href="src/classifiers/NMFClassifier/">NMFClassifier</a>
</li>
            
<li >
    <a href="src/classifiers/TemplateBasedClassifier/">TemplateBasedClassifier</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">cloudfitters</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="src/cloudfitters/CloudFitter/">CloudFitter</a>
</li>
            
<li >
    <a href="src/cloudfitters/ExponentialFitter/">ExponentialFitter</a>
</li>
            
<li >
    <a href="src/cloudfitters/GaussianKdeFitter/">GaussianKdeFitter</a>
</li>
            
<li >
    <a href="src/cloudfitters/LogNormalFitter/">LogNormalFitter</a>
</li>
            
<li >
    <a href="src/cloudfitters/SeminormalFitter/">SeminormalFitter</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">utils <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="utils/autoencoder_utils/">autoencoder_utils</a>
</li>
                                    
<li >
    <a href="utils/clustering_utils/">clustering_utils</a>
</li>
                                    
<li >
    <a href="utils/csv_utils/">csv_utils</a>
</li>
                                    
<li >
    <a href="utils/dataframe_utils/">dataframe_utils</a>
</li>
                                    
<li >
    <a href="utils/generate_data_2d_utils/">generate_data_2d_utils</a>
</li>
                                    
<li >
    <a href="utils/generate_data_utils/">generate_data_utils</a>
</li>
                                    
<li >
    <a href="utils/hist_utils/">hist_utils</a>
</li>
                                    
<li >
    <a href="utils/json_utils/">json_utils</a>
</li>
                                    
<li >
    <a href="utils/plot_utils/">plot_utils</a>
</li>
                                    
<li >
    <a href="utils/refruns_utils/">refruns_utils</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="disabled">
                                <a rel="next" >
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="src/HistStruct/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#some-utilities-and-example-notebooks-for-ml4dqmdc">Some utilities and example notebooks for ML4DQM/DC</a></li>
            <li><a href="#structure-of-this-repository">Structure of this repository:</a></li>
            <li><a href="#tutorials">Tutorials:</a></li>
            <li><a href="#other-remarks">Other remarks:</a></li>
            <li><a href="#to-get-the-tutorial-notebooks-running-in-swan">To get the tutorial notebooks running in SWAN</a></li>
            <li><a href="#further-documentation">Further documentation:</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="some-utilities-and-example-notebooks-for-ml4dqmdc">Some utilities and example notebooks for ML4DQM/DC</h1>
<p>This repository contains example code for the ML4DQM/DC project.<br />
It was developed with the idea of training autoencoders on the per-lumisection histograms stored in dedicated DQMIO files in order to (partially) automate the DQM and/or DC process. In the future, this repository is intended to be generally useful for any ML4DQM/DC study (i.e. any subsystem, any type of histogram, any classification method), but for historical reasons it is at this moment focused on the following subtopics:  </p>
<ul>
<li>some 1D histograms related to the status of the pixel tracker.<br />
  (support for 2D histograms is being added, currently loading the dataframes, getting numpy arrays of histograms and some plotting methods are implemented, see specifically the tutorial plot_histograms_2d.ipynb)  </li>
<li>using an autoencoder as classification algorithm, i.e. looking at the mean-squared-error between a histogram and its reconstruction as a measure for anomality.<br />
  (support for other algorithms is in principle present, one just needs to define a class deriving from src/classifiers/HistogramClassifier. See some basic examples in src/classifiers based on an autoencoder or on a direct comparison with reference histograms. See also the tutorial autoencoder_combine.ipynb and template_combine.ipynb for example usage. Planned to be extended, especially for 2D histograms.)  </li>
</ul>
<h3 id="structure-of-this-repository">Structure of this repository:</h3>
<p>There are three important directories: tutorials, utils and src.  </p>
<ul>
<li>utils contains a number of python notebooks and equivalent scripts with static functions for general use.  </li>
<li>src contains a class structure that should in principle allow a modular approach and easy extensions, for example towards other single-histogram classification algorithms (see subfolder classifiers) or ways of combining the output for several histogram types (see subfolder cloudfitters).  </li>
<li>tutorials contains a number of notebooks that can be used to get familiar with the code and its capabilities.  </li>
</ul>
<h3 id="tutorials">Tutorials:</h3>
<p>Some tutorials are located in the tutorials folder in this repository, that should help you get started with the code. They can be grouped into different steps:  </p>
<ul>
<li>Step 1: put the data in a more manageable format. The raw csv files that are our common input are not very easy to work with. Therefore you would probably first want to do something similar to what's done in the notebook read_and_write_data.ipynb. See the code and inline comments in that script and the functions it refers to for more detailed explanation. Its output is one single csv file per histogram type and per year, which is often much more convenient than the original csv files (which contain all histogram types together and are split per number of lines, not per run). All other functions and notebooks presuppose this first step.  </li>
<li>Step 2: plot the data. Next, you can run plot_histograms.ipynb and plot_histograms_loop.ipynb. These notebooks should help you get a feeling of what your histogram looks like in general, and perhaps help you find some anomalies that you can use for testing. For 2D histograms, look at plot_histograms_2d.ipynb instead.  </li>
<li>Step 3: train an autoencoder. The scripts autoencoder.ipynb and autoencoder_iterative.ipynb are used to train an autoencoder on the whole dataset or a particular subset respectively. Finally, autoencoder_combine.ipynb trains autoencoders on multiple types of histograms and combines the mse's for each. An example on how to implement another classification method is shown in template_combine.ipynb.  </li>
</ul>
<h3 id="other-remarks">Other remarks:</h3>
<ul>
<li>The repository contains no data files. I was planning to put some example data files in a data folder, but the files are too big for github. However, the tutorial read_and_write_data.ipynb should help you get the data from where it is stored and put it in a useful format for further processing.  </li>
<li>Disclaimer: still largely in development stage...  </li>
</ul>
<h3 id="to-get-the-tutorial-notebooks-running-in-swan">To get the tutorial notebooks running in SWAN</h3>
<h4 id="preferred-method">(preferred method):</h4>
<ul>
<li>Log in to SWAN.  </li>
<li>Go to Projects.  </li>
<li>Click the cloud icon that says 'Download Project from git'  </li>
<li>Paste the following url: https://github.com/LukaLambrecht/ML4DQM-DC.git.  </li>
</ul>
<h4 id="alternative-method">(alternative method):</h4>
<ul>
<li>Log in to SWAN.</li>
<li>Click on the leftmost icon on the top right ('new terminal').</li>
<li>Navigate to where you want this repository (the starting place is your CERNBox home directory).</li>
<li>Paste this command: git clone https://github.com/LukaLambrecht/ML4DQM-DC.git (or however you usually clone a repository).    </li>
<li>Exit the terminal.  </li>
<li>The folder should now be where you cloned it, and you can open and run the notebooks in it in SWAN. </li>
</ul>
<h3 id="further-documentation">Further documentation:</h3>
<ul>
<li>Documentation for all the class definitions and functions in the relevant code directories: https://LukaLambrecht.github.io/ML4DQM-DC/ (note: this documentation is generated automatically from comments in the code and currently not yet in perfect shape, both regarding content and layout).  </li>
<li>Note that the website above does not include documentation for the tutorials (yet?). However, some comments in the tutorial notebooks should provide (enough?) explanation to follow along.  </li>
</ul></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = ".",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="js/base.js" defer></script>
        <script src="search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>

<!--
MkDocs version : 1.0.4
Build Date UTC : 2021-04-15 09:13:12
-->
