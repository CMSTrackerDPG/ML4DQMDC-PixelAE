<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>MaxPullClassifier - Documentation for the ML4DQM/DC code</title>
        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../../..">Documentation for the ML4DQM/DC code</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../../..">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">omsapi <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../omsapi/">README</a>
</li>
                                    
<li >
    <a href="../../../omsapi/get_oms_data/">get_oms_data</a>
</li>
                                    
<li >
    <a href="../../../omsapi/omsapi/">omsapi</a>
</li>
                                    
<li >
    <a href="../../../omsapi/urls/">urls</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">omsinterface <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../omsinterface/">README</a>
</li>
                                    
<li >
    <a href="../../../omsinterface/cert/">cert</a>
</li>
                                    
<li >
    <a href="../../../omsinterface/connectiontools/">connectiontools</a>
</li>
                                    
<li >
    <a href="../../../omsinterface/get_oms_data/">get_oms_data</a>
</li>
                                    
<li >
    <a href="../../../omsinterface/omstools/">omstools</a>
</li>
                                    
<li >
    <a href="../../../omsinterface/urls/">urls</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">run <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../run/">README</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">src <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../DataLoader/">DataLoader</a>
</li>
                                    
<li >
    <a href="../../HistStruct/">HistStruct</a>
</li>
                                    
<li >
    <a href="../../PlotStyleParser/">PlotStyleParser</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">classifiers</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../AutoEncoder/">AutoEncoder</a>
</li>
            
<li >
    <a href="../HistogramClassifier/">HistogramClassifier</a>
</li>
            
<li class="active">
    <a href="./">MaxPullClassifier</a>
</li>
            
<li >
    <a href="../NMFClassifier/">NMFClassifier</a>
</li>
            
<li >
    <a href="../PCAClassifier/">PCAClassifier</a>
</li>
            
<li >
    <a href="../TemplateBasedClassifier/">TemplateBasedClassifier</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">cloudfitters</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cloudfitters/CloudFitter/">CloudFitter</a>
</li>
            
<li >
    <a href="../../cloudfitters/ExponentialFitter/">ExponentialFitter</a>
</li>
            
<li >
    <a href="../../cloudfitters/GaussianKdeFitter/">GaussianKdeFitter</a>
</li>
            
<li >
    <a href="../../cloudfitters/HyperRectangleFitter/">HyperRectangleFitter</a>
</li>
            
<li >
    <a href="../../cloudfitters/IdentityFitter/">IdentityFitter</a>
</li>
            
<li >
    <a href="../../cloudfitters/LogNormalFitter/">LogNormalFitter</a>
</li>
            
<li >
    <a href="../../cloudfitters/SeminormalFitter/">SeminormalFitter</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">utils <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../utils/">README</a>
</li>
                                    
<li >
    <a href="../../../utils/autoencoder_utils/">autoencoder_utils</a>
</li>
                                    
<li >
    <a href="../../../utils/clustering_utils/">clustering_utils</a>
</li>
                                    
<li >
    <a href="../../../utils/csv_utils/">csv_utils</a>
</li>
                                    
<li >
    <a href="../../../utils/dataframe_utils/">dataframe_utils</a>
</li>
                                    
<li >
    <a href="../../../utils/generate_data_2d_utils/">generate_data_2d_utils</a>
</li>
                                    
<li >
    <a href="../../../utils/generate_data_utils/">generate_data_utils</a>
</li>
                                    
<li >
    <a href="../../../utils/hist_utils/">hist_utils</a>
</li>
                                    
<li >
    <a href="../../../utils/json_utils/">json_utils</a>
</li>
                                    
<li >
    <a href="../../../utils/mask_utils/">mask_utils</a>
</li>
                                    
<li >
    <a href="../../../utils/plot_utils/">plot_utils</a>
</li>
                                    
<li >
    <a href="../../../utils/refruns_utils/">refruns_utils</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../HistogramClassifier/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../NMFClassifier/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#maxpullclassifier">MaxPullClassifier</a></li>
            <li><a href="#pull">pull</a></li>
            <li><a href="#maxabspull">maxabspull</a></li>
            <li><a href="#class-maxpullclassifier">[class] MaxPullClassifier</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="maxpullclassifier">MaxPullClassifier</h1>
<p><strong>Histogram classification based on maximum pull between test histogram and reference histogram.</strong></p>
<p>Specifically intended for 2D histograms, but should in principle work for 1D as well.<br />
Ssee static function 'pull' for definition of bin-per-bin pull and other notes.</p>
<hr />
<h3 id="pull">pull</h3>
<p>full signature:  </p>
<pre><code class="text">def pull( testhist, refhist )  
</code></pre>

<p>comments:  </p>
<pre><code class="text">calculate bin-per-bin pull between two histograms  
bin-per-bin pull is defined here preliminarily as (testhist(bin)-refhist(bin))/sqrt(refhist(bin))  
notes:   
- bins in the denominator where refhist is &lt; 1 are set to one! This is for histograms with absolute counts, and they should not be normalized!  
- instead another normalization is applied: the test histogram is multiplied by sum(refhist)/sum(testhist) before computing the pulls  
input arguments:  
- testhist, refhist: numpy arrays of the same shape  
output:  
numpy array of same shape as testhist and refhist  
</code></pre>

<h3 id="maxabspull">maxabspull</h3>
<p>full signature:  </p>
<pre><code class="text">def maxabspull( testhist, refhist, n=1 )  
</code></pre>

<p>comments:  </p>
<pre><code class="text">calculate maximum of bin-per-bin pulls (in absolute value) between two histograms  
see definition of bin-per-bin pull in function pull (above)  
input arguments:  
- testhist, refhist: numpy arrays of the same shape  
- n: nubmer of largest pull values to average over (default: 1, just take single maximum)  
output:  
a float  
</code></pre>

<hr />
<h2 id="class-maxpullclassifier">[class] MaxPullClassifier</h2>
<p>comments:  </p>
<pre><code class="text">histogram classification based on maximum pull between test histogram and reference histogram.  
specifically intended for 2D histograms, but should in principle work for 1D as well.  
see static function pull (above) for definition of bin-per-bin pull and other notes.  
</code></pre>

<h3 id="9595init9595">&#10551; __init__</h3>
<p>full signature:  </p>
<pre><code class="text">def __init__( self, nmaxpulls=1 )  
</code></pre>

<p>comments:  </p>
<pre><code class="text">initializer  
input arguments:  
- nmaxpulls: number of largest pull values to average over   
  (default: 1, just take single maximum)  
</code></pre>

<h3 id="set95nmaxpulls">&#10551; set_nmaxpulls</h3>
<p>full signature:  </p>
<pre><code class="text">def set_nmaxpulls( self, nmaxpulls )  
</code></pre>

<p>comments:  </p>
<pre><code class="text">set the nmaxpulls parameter (see also initializer)  
</code></pre>

<h3 id="train">&#10551; train</h3>
<p>full signature:  </p>
<pre><code class="text">def train( self, refhist )  
</code></pre>

<p>comments:  </p>
<pre><code class="text">'train' the classifier, i.e. set the reference histogram.  
input arguments:  
- refhist: a numpy array of shape (1,nbins) or (1,nybins,nxbins)  
</code></pre>

<h3 id="evaluate">&#10551; evaluate</h3>
<p>full signature:  </p>
<pre><code class="text">def evaluate( self, histograms )  
</code></pre>

<p>comments:  </p>
<pre><code class="text">classify the histograms based on their max bin-per-bin pull (in absolute value) with respect to a reference histogram  
</code></pre>

<h3 id="getpull">&#10551; getpull</h3>
<p>full signature:  </p>
<pre><code class="text">def getpull( self, histogram )  
</code></pre>

<p>comments:  </p>
<pre><code class="text">get the pull histogram for a given test histogram  
input arguments:  
histogram: a single histogram, i.e. numpy array of shape (nbins) for 1D or (nybins,nxbins) for 2D.  
output:  
numpy array of same shape as histogram containing bin-per-bin pull w.r.t. reference histogram  
</code></pre>

<hr /></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js" defer></script>
        <script src="../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
